<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>code-n-go // Robotech</title>
    <script src="static/blockly_compressed.js"></script>
    <script src="static/blocks_compressed.js"></script>
    <script src="static/python_compressed.js"></script>
    <script src="static/pl.js"></script>
    <style>
        body { margin: 0; display: flex; flex-direction: column; height: 100vh; font-family: sans-serif; background: #f0f0f0; }
        #header { background: #e67e22; color: white; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        #blocklyDiv { flex-grow: 1; }
        .btn { background: #2c3e50; color: white; border: none; padding: 8px 20px; border-radius: 4px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>
    <div id="header">
        <span><strong>code-n-go</strong> | Robotech</span>
        <button class="btn" onclick="runCode()">START ▶</button>
    </div>
    <div id="blocklyDiv"></div>

    <xml id="toolbox" style="display: none">
        <category name="Logika" colour="#5b80a5"><block type="controls_if"></block></category>
        <category name="Pętle" colour="#5ba55b"><block type="controls_repeat_ext"></block></category>
        <category name="Robot" colour="#e67e22"><block type="text_print"></block></category>
    </xml>

    <script>
        var workspace = Blockly.inject('blocklyDiv', {
            toolbox: document.getElementById('toolbox'),
            theme: Blockly.Themes.Zelos,
            renderer: 'zelos'
        });
        Blockly.setLocale(Blockly.Msg['pl']);

        function runCode() {
            var code = Blockly.Python.workspaceToCode(workspace);
            fetch('/run', { method: 'POST', body: code });
        }
    </script>
</body>
</html>
